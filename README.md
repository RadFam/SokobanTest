### SokobanTest

Демо версия Sokoban-подобной игры (**Unity 2018.2.19.f1**)

В данной игре предлагается двигать ящики на специально отведенные для них места. Игра заканчивается, когда, все ящики займут специально назначенные позиции.

Ящик:\
<img src="/_forReadMeFiles/Box.png" width="60" height="60">

Позиция, куда должен быть поставлен ящик:\
<img src="/_forReadMeFiles/GrassTarget.png" width="60" height="60">

Движению ящиков мешают
- стены
- другие ящики, находящиеся по ходу движения активного ящика

Для того, чтобы было удобно редактировать игровое поле, был использован встроенный Tilemap Editor с квадратной ортогональной сеткой, 
в котором были введены тайлы
- травы <img src="/_forReadMeFiles/Grass.png" width="60" height="60">
- стен <img src="/_forReadMeFiles/Wall.png" width="60" height="60">
- мест, куда нужно поставить ящики <img src="/_forReadMeFiles/GrassTarget.png" width="60" height="60">

В целом, для рисования игрового поля, необходимо воспользоваться tile palette, как на рисунке ниже
<img src="/_forReadMeFiles/FieldEditor.png">

Ящики и Игрок представляют собой отдельные GameObject'ы (причем, ящик BoxObject оформлен, как префаб), которые отдельно располагаются на игрой сцене после отрисовки игрового поля. Необходимо отметить(!), что при выставленни их на сцене необязательно стремиться указать им начальные координаты, в точности совпадающие с координатами тайлов в Grid - после запуска игры, скрипт GameManager.cs автоматически их выровняет по ближайшим центрам тайлов

В проекте были использованы следующие скрипты:
- **GameManager.cs** - основной управляющий скрипт игры, отвечающий за взаимодействие с игровым тайловым полем, player'ом и ящиками
- **FieldTileManager.cs** - скрипт, определяющий работу тайлового поля (получение координат тайлов, выравнивание по координатам тайлов, получение свойст тайлов - проходимость/непроходимость/целевая точка для ящика). Класс FieldTileManager отнаследован от FieldManager (скрипт FieldManager.cs) в расчете на то, что GameManager может работать с FieldManager'ами, с другими механизмами построения игрового поля
- **PlayerController.cs** - скрипт управления игроком
- **BoxController.cs** - скрипт управления ящиком (его перемещение, регистрация в GameManager)
- **UIController.cs** - скрипт, отвечающий за работу Canvas элементов - отображение очков, финальное сообщение
- **TileData.cs** - Scriptable Object, который хранит информацию о тайлах (внешний вид тайла, дополнительная информация, которая читается в FieldTileManager.cs)

В скрипте GameManager.cs (присоединятеся к отдельному объекту сцены) можно управлять:
- WalkSpeed - скоростью перемещения по полю player'а и двигаемых им ящиков
- MaxScore - максимального необходимого числа очков, которое должен набрать игрок, чтобы уровень считался пройденным (разумеется, оно не должно быть больше числа тайлов <img src="/_forReadMeFiles/GrassTarget.png" width="20" height="20"> для перетаскивания туда ящиков)

В FieldTileManager.cs можно настраивать DeltaXTile и DeltaYTile - ширину и высоту поля в тайлах (имеют смысл, если по границам поля стены не отрисовывать, на за них не должны выпадать player и ящики)\

<img src="/_forReadMeFiles/GameControllers.png">

В PlayerController.cs можно настроить спрайты, которые будут отображаться на player'е, когда он смотрит влево/вправо, вниз/вверх\
<img src="/_forReadMeFiles/PlayerController.png">
